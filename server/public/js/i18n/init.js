var i18n_currency="eur",unreadNotificationCount=0;function i18_init(){var e=getCookie("brainstr-c-currency");if(null!=e)i18n_currency=e;else switch(i18n_locale){case"de":i18n_currency="eur";break;case"uk":i18n_currency="uah";break;case"en":i18n_currency="usd";break;case"ru":i18n_currency="rub";break;default:i18n_currency="eur"}"undefined"!=typeof uData&&(i18n_locale=uData.locale,i18n_currency=uData.currency),"production"==CFG_ENV&&gtag("set",{language:i18n_locale,currency:i18n_currency}),moment.locale(i18n_locale),i18n_changeLanguage(i18n_locale,!1),i18n_update(),i18n_updateCurrency(i18n_currency),i18n_updatePrices()}function i18n_checkValidLang(e){return"en"==e||"de"==e||"ru"==e||"ua"==e}function i18n_update(){var e={};e[i18n_locale]=i18nTranslations,$.i18n().load(e).then((function(){$.i18n({locale:i18n_locale}),$("[data-i18n]").each((function(){txt=$.i18n($(this).data("i18n")),txt.startsWith("_bstr")?console.error(txt):$(this).i18n()}))}))}function i18n_changeLanguage(e,a=!0){i18n_locale=e,setCookie("brainstr-c-language",i18n_locale,365),$("#i18-language-picker").val(i18n_locale),a&&location.reload()}function getCookie(e){var a=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(a)return a[2]}function setCookie(e,a,n){var t="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),t="; expires="+i.toUTCString()}document.cookie=e+"="+(a||"")+t+"; path=/;"}function setCookieMinutes(e,a,n){var t="";if(n){var i=new Date;i.setTime(i.getTime()+60*n*1e3),t="; expires="+i.toUTCString()}document.cookie=e+"="+(a||"")+t+"; path=/;"}async function i18n_cc(e,a="eur",n=!1){switch(a){case"aud":res=n?"$"+parseFloat(e*EXCHANGE_RATES.AUD).toFixed(2)+" AUD":"$"+parseFloat(e*EXCHANGE_RATES.AUD).toFixed(2);break;case"cad":res=n?"$"+parseFloat(e*EXCHANGE_RATES.CAD).toFixed(2)+" CAD":"$"+parseFloat(e*EXCHANGE_RATES.CAD).toFixed(2);break;case"chf":res=n?"CHF "+parseFloat(e*EXCHANGE_RATES.CHF).toFixed(2):parseFloat(e*EXCHANGE_RATES.CHF).toFixed(2)+" fr";break;case"cny":res=n?"CNY"+parseFloat(e*EXCHANGE_RATES.CNY).toFixed(2):"CN¥"+parseFloat(e*EXCHANGE_RATES.CNY).toFixed(2);break;case"czk":res=n?"CZK "+parseFloat(e*EXCHANGE_RATES.CZK).toFixed(2):parseFloat(e*EXCHANGE_RATES.CZK).toFixed(2)+" Kč";break;case"dkk":res=n?"DKK "+parseFloat(e*EXCHANGE_RATES.DKK).toFixed(2):parseFloat(e*EXCHANGE_RATES.DKK).toFixed(2)+" kr";break;case"gbp":res=n?"£"+parseFloat(e*EXCHANGE_RATES.GBP).toFixed(2)+" GBP":"£"+parseFloat(e*EXCHANGE_RATES.GBP).toFixed(2);break;case"hkd":res=n?"HK$"+parseFloat(e*EXCHANGE_RATES.HKD).toFixed(2)+" HKD":"HK$"+parseFloat(e*EXCHANGE_RATES.HKD).toFixed(2);break;case"jpy":res=n?"¥"+parseFloat(e*EXCHANGE_RATES.JPY).toFixed(2)+" JPY":"¥"+parseFloat(e*EXCHANGE_RATES.JPY).toFixed(2);break;case"nok":res=n?"NOK "+parseFloat(e*EXCHANGE_RATES.NOK).toFixed(2):parseFloat(e*EXCHANGE_RATES.NOK).toFixed(2)+" kr";break;case"nzd":res=n?"$"+parseFloat(e*EXCHANGE_RATES.NZD).toFixed(2)+" NZD":"$"+parseFloat(e*EXCHANGE_RATES.NZD).toFixed(2);break;case"rub":res=n?"RUB "+parseFloat(5*Math.ceil(e*EXCHANGE_RATES.RUB/5)):parseFloat(5*Math.ceil(e*EXCHANGE_RATES.RUB/5))+" ₽";break;case"sek":res=n?"SEK "+parseFloat(e*EXCHANGE_RATES.SEK).toFixed(2):parseFloat(e*EXCHANGE_RATES.SEK).toFixed(2)+" kr";break;case"uah":res=n?"₴"+parseFloat(e*EXCHANGE_RATES.UAH).toFixed(2)+" UAH":"₴"+parseFloat(e*EXCHANGE_RATES.UAH).toFixed(2);break;case"usd":res=n?"$"+parseFloat(e*EXCHANGE_RATES.USD).toFixed(2)+" USD":"$"+parseFloat(e*EXCHANGE_RATES.USD).toFixed(2);break;case"zar":res=n?"R "+parseFloat(e*EXCHANGE_RATES.ZAR).toFixed(2)+" ZAR":"R "+parseFloat(e*EXCHANGE_RATES.ZAR).toFixed(2);break;default:res=n?"EUR "+parseFloat(e).toFixed(2):parseFloat(e).toFixed(2)+"€"}return res}function i18n_updatePrices(){$("[data-currency]").each((async function(){var e=parseFloat($(this).data("currency"));priceFormat=await i18n_cc(e),$(this).text(priceFormat)})),$("[data-currency-converted]").each((async function(){var e=parseFloat($(this).data("currency-converted"));priceFormat=await i18n_cc(e,i18n_currency),$(this).text(priceFormat)}))}function i18n_updateCurrency(e){setCookie("brainstr-c-currency",i18n_currency=e,365),$("#i18-currency-picker").val(i18n_currency),i18n_updatePrices()}async function resetNotifications(){await r("resetNotifications");$("#notifications-container").html(""),$("#notification-btn").html('<i class="icon-feather-bell"></i>'),$("#notification-btn").click()}function interpretNotifications(){"undefined"!=typeof notifications&&($.each(notifications,(async function(e,a){addNotification(a)})),i18n_updatePrices(),0==notifications.length&&$("#notifications-container").append(`<li class="notifications-not-read" id="notification-none">\n                                                <a href="javascript:void(0);">\n                                                    <span class="notification-text">${$.i18n("_bstr.notification.none")}</span>\n                                                </a>\n                                            </li>`))}function addNotification(e){var a=moment.utc(e.createdAt);a=a.utc().utcOffset(UTCOffset).format("lll");var n="";switch(e.type){case"lesson_requested":n=$.i18n("_bstr.notification.lesson_requested","<strong>"+e.name+"</strong>");break;case"lesson_rejected":n=$.i18n("_bstr.notification.lesson_rejected","<strong>"+e.name+"</strong>");break;case"lesson_accepted":n=$.i18n("_bstr.notification.lesson_accepted","<strong>"+e.name+"</strong>");break;case"lesson_cancelled":n=$.i18n("_bstr.notification.lesson_cancelled","<strong>"+e.name+"</strong>");break;case"lesson_confirmed":n=$.i18n("_bstr.notification.lesson_confirmed","<strong>"+e.name+"</strong>",'<strong data-currency-converted="'+e.price+'"></strong>');break;default:return}$("#notifications-container").append(`<li class="notifications-not-read">\n                                            <a href="javascript:void(0);" onclick="openNotification('${e._id}', '${e.link}')">\n                                                <span class="notification-text">${n}</span>\n                                                <span class="notification-date">${a}</span>\n                                            </a>\n                                        </li>`),unreadNotificationCount++}async function openNotification(e,a){await r("readNotification",{id:e}),window.location.href=a}i18_init(),window.onload=async function(){"undefined"!=typeof uData&&interpretNotifications(),i18n_updatePrices(),$("#i18-language-picker").val(i18n_locale),$("#i18-language-picker").on("change",(async function(){if("undefined"!=typeof uData)try{await r("updateLocale",{locale:$("#i18-language-picker").val()})}catch(e){console.error(e)}i18n_changeLanguage($("#i18-language-picker").val())})),$("#i18-currency-picker").on("change",(async function(){if("undefined"!=typeof uData)try{await r("updateCurrency",{currency:$("#i18-currency-picker").val()})}catch(e){console.error(e)}i18n_updateCurrency($("#i18-currency-picker").val())}))};